<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>Examples - FOSS Trading</title>
	<script>(function(d,e){d[e]=d[e].replace("no-js","js");})(document.documentElement,"className");</script>
	<meta name="description" content="">
	<meta property="og:title" content="Examples" />
<meta property="og:description" content="" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://joshuaulrich.github.io/fosstrading/tags/examples/" />

<meta property="og:updated_time" content="2014-03-29T12:25:00-05:00" />

	
	<link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link rel="dns-prefetch" href="//fonts.gstatic.com">
	<link rel="alternate" type="application/rss+xml" href="/fosstrading/tags/examples/index.xml" title="FOSS Trading">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700">
	<link rel="stylesheet" href="/fosstrading/css/style.css">
	<link rel="stylesheet" href="/fosstrading/fosstrading.css">
	<link rel="shortcut icon" href="/fosstrading/favicon.ico">
		
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-3314405-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

</head>
<body class="body">
	<div class="container container--outer">
		<header class="header">
	<div class="container">
		<div class="logo">
			<a class="logo__link" href="/fosstrading/" title="FOSS Trading" rel="home">
				<div class="logo__title">FOSS Trading</div>
				<div class="logo__tagline">Algorithmic Trading with Free Open Source Software</div>
			</a>
		</div>
		
<nav class="menu">
	<button class="menu__btn" aria-haspopup="true" aria-expanded="false" tabindex="0">
		<span class="menu__btn-title" tabindex="-1">Menu</span>
	</button>
	<ul class="menu__list">
		<li class="menu__item">
			<a class="menu__link" href="">
				
				<span class="menu__text">Blog</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/fosstrading/page/disclosures/">
				
				<span class="menu__text">Disclosures</span>
				
			</a>
		</li>
		<li class="menu__item">
			<a class="menu__link" href="/fosstrading/page/enterprise/">
				
				<span class="menu__text">For Enterprise</span>
				
			</a>
		</li>
	</ul>
</nav>

	</div>
</header>
		<div class="wrapper flex">
			<div class="primary">
			
<main class="main list" role="main">
	<header class="main__header">
		<h1 class="main__title">Examples</h1>
	</header><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2011/02/backtesting-in-excel-and-r/" rel="bookmark">
			Backtesting in Excel and R
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2011-02-17T18:53:00-06:00">February 17, 2011</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		This post is the introduction to a series that will illustrate how to backtest the same strategy in Excel and R. The impetus for this series started with this tweet by Jared Woodard at Condor Options. After Soren Macbeth introduced us, Jared suggested backtesting a simple DVI strategy in Excel and R.
The three-post series will show you:
 Resources that make it easier to move from Excel to R How to test DVI in Excel How to test DVI in R  Since I know next to nothing about testing strategies in Excel, I will be writing posts 1 and 3.
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/08/margin-constraints-with-lspm-comments/" rel="bookmark">
			Margin Constraints with LSPM
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-08-01T23:31:00-05:00">August 01, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		Josh Thank you for providing the LSPM package - I&hellip; Chris - Apr 2, 2011
Josh
Thank you for providing the LSPM package - I would not have been able to experiment with using LSPM if I could not use the package. I would like to confirm two things:
1) the maxUnits function has not been built in to the LSPM package - correct?
2) what should one do if using leverage is not an option.
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/08/margin-constraints-with-lspm/" rel="bookmark">
			Margin Constraints with LSPM
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-08-01T23:31:00-05:00">August 01, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		When optimizing leverage space portfolios, I frequently run into the issue of one or more f$ ([Max Loss]/f) being less than the margin of its respective instrument. For example, assume the required margin for an instrument is $500, f$ is $100, and $100,000 in equity. The optimal amount to trade is 1,000 shares ($100,000/$100). However, that would require $500,000 in equity, while you only have $100,000. What do you do?
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/05/lspm-joint-probability-tables-comments/" rel="bookmark">
			LSPM Joint Probability Tables
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-05-18T22:30:00-05:00">May 18, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		Josh, If I may comment: The joint probabilities ta&hellip; Ralph Vince - May 3, 2010
Josh, If I may comment:
The joint probabilities table (&ldquo;jpt&rdquo;) ultimately should encompass and be a proxy for all potential risk for the next period.
In other words, frequently, in attempting to articulate &ldquo;risk,&rdquo; we see the argument that it is more than mere variance. That there is liquidity risk, there is counter-party risk, this risk and that risk, and there is a notion that risk posses many facets.
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/05/lspm-joint-probability-tables/" rel="bookmark">
			LSPM Joint Probability Tables
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-05-18T22:30:00-05:00">May 18, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		I&rsquo;ve received several requests for methods to create joint probability tables for use in LSPM&rsquo;s portfolio optimization functions. Rather than continue to email this example to individuals who ask, I post it here in hopes they find it via a Google search. ;-)
I&rsquo;m certain there are more robust ways to estimate this table, but the code below is a start&hellip;
&lsquo;x&rsquo; is a matrix of market system returns
&lsquo;n&rsquo; is the number of bins to create for each system
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/04/maximum-probability-of-profit-comments/" rel="bookmark">
			Maximum Probability of Profit
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-04-09T10:04:00-05:00">April 09, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		Josh, Thanks for another great explanation. I migh&hellip; Ralph Vince - Apr 5, 2010
Josh, Thanks for another great explanation. I might point out to that it is not just the optimization algorithms used, but in the case of mazimizing for greatest probability of profit, there are many posssible optimal sets (f1,..,fn,z+,z-). There are multiple sets which will result in an equivalent (and highest) probability of profit.
-Ralph Vince If I understand the optimization problem correctly&hellip; Matthew - Apr 0, 2010
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/04/maximum-probability-of-profit/" rel="bookmark">
			Maximum Probability of Profit
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-04-09T10:04:00-05:00">April 09, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		To continue with the LSPM examples, this post shows how to optimize a Leverage Space Portfolio for the maximum probability of profit. The data and example are again taken from The Leverage Space Trading Model by Ralph Vince.
These optimizaitons take a very long time. 100 iterations on a 10-core Amazon EC2 cluster took 21 hours. Again, the results will not necessarily match the book because of differences between DEoptim and Ralph&rsquo;s genetic algorithm and because there are multiple possible paths one can take through leverage space that will achieve similar results.
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/01/lspm-with-snow-comments/" rel="bookmark">
			LSPM with snow
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-01-10T17:01:00-06:00">January 10, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		Hi Joshua! Could you tell me how to calculate prob&hellip; senyai - Apr 5, 2010
Hi Joshua! Could you tell me how to calculate probability of drawdown using martingale exponents? I do not want to optimize anything, just calculate dd like Vince did at 173 page. My code:
-&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
port &lt;- lsp(trades,probs, f=c(0.085,0.015,0.129), z = c(-0.76, -0.992, 0.0))
probDrawdown(port,0.8,12,13)
-&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&mdash;&ndash;
This code shows me value 0.0001982222, but Vince says his dd is 0.
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/01/lspm-with-snow/" rel="bookmark">
			LSPM with snow
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-01-10T17:01:00-06:00">January 10, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		My last post provided examples of how to use the LSPM package. Those who experimented with the code have probably found that constrained optimizations with horizons &gt; 6 have long run-times (when calc.max &gt;= horizon).
This post will illustrate how the snow package can increase the speed of the probDrawdown and probRuin functions on computers with multiple cores. This yields nearly linear improvements in run-times relative to the number of cores.
	</div>
</article><article class="list__item post">
	<header class="list__header">
		<h3 class="list__title post__title ">
			<a href="/fosstrading/2010/01/lspm-examples-comments/" rel="bookmark">
			LSPM Examples
			</a>
		</h3>
		<div class="list__meta meta">
<div class="meta__item-datetime meta__item">
	<svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class="meta__text" datetime="2010-01-02T15:35:00-06:00">January 02, 2010</time></div></div>
	</header>
	<div class="content list__excerpt post__content clearfix">
		Hi Josh I am trying to replicate the results on p&hellip; Chris - Nov 2, 2011
Hi Josh
I am trying to replicate the results on page 87 (as mentioned in your post above) of the LSPM book. I do the following:
&gt; data(port)
&gt; DEctrl &lt;- list(NP=30, itermax=100)
&gt; res &lt;- optimalf(port, control=DEctrl)
The result is :
Iteration: 100 bestvalit: -1.293917 bestmemit: 1.000000 0.000000 0.857813
Page 87 reads:
	</div>
</article>
</main>

<div class="pagination">
	<a class="pagination__item pagination__item--prev btn" href="/fosstrading/tags/examples/">«</a>
	<span class="pagination__item pagination__item--current">2/3</span>
	<a class="pagination__item pagination__item--next btn" href="/fosstrading/tags/examples/page/3/">»</a>
</div>

			</div>
			
<aside class="sidebar"><div class="widget-search widget">
	<form class="widget-search__form" role="search" method="get" action="https://google.com/search">
		<label>
			<input class="widget-search__field" type="search" placeholder="SEARCH..." value="" name="q" aria-label="SEARCH...">
		</label>
		<input class="widget-search__submit" type="submit" value="Search">
		<input type="hidden" name="sitesearch" value="https://joshuaulrich.github.io/fosstrading/" />
	</form>
</div><div>
    <a title="CSI Data" href="https://www.csicheckout.com/cgi-bin/ua_order_form_nw.pl?referrer=JU" target="_blank">
        <img class="csi-banner" src="/csi-banner.jpg" width="160" height="312">
    </a>
    <p>
</div>

<div class="widget-recent widget">
	<h4 class="widget__title">Recent Posts</h4>
	<div class="widget__content">
		<ul class="widget__list">
			<li class="widget__item"><a class="widget__link" href="/fosstrading/2020/03/quantmod04-16-on-cran/">quantmod_0.4-16 on CRAN</a></li>
			<li class="widget__item"><a class="widget__link" href="/fosstrading/2019/10/microbenchmark14-7-on-cran/">microbenchmark_1.4-7 on CRAN</a></li>
			<li class="widget__item"><a class="widget__link" href="/fosstrading/2019/03/quantmod04-14-on-cran/">quantmod_0.4-14 on CRAN</a></li>
			<li class="widget__item"><a class="widget__link" href="/fosstrading/2018/11/xts-011-2-on-cran/">xts 0.11-2 on CRAN</a></li>
			<li class="widget__item"><a class="widget__link" href="/fosstrading/2018/09/xts-011-1-on-cran/">xts 0.11-1 on CRAN</a></li>
		</ul>
	</div>
</div>
<div class="widget-taglist widget">
	<h4 class="widget__title">Tags</h4>
	<div class="widget__content">
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/api/" title="API">API</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/blotter/" title="blotter">blotter</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/code/" title="Code">Code</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/data/" title="Data">Data</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/deoptim/" title="DEoptim">DEoptim</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/drawdown/" title="Drawdown">Drawdown</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/events/" title="Events">Events</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/examples/" title="Examples">Examples</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/excel/" title="Excel">Excel</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/historical-data/" title="HIstorical Data">HIstorical Data</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/ibrokers/" title="IBrokers">IBrokers</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/interactive-brokers/" title="Interactive Brokers">Interactive Brokers</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/lspm/" title="LSPM">LSPM</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/portfolioanalytics/" title="PortfolioAnalytics">PortfolioAnalytics</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/quantmod/" title="quantmod">quantmod</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/quantstrat/" title="quantstrat">quantstrat</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/r/" title="R">R</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/releases/" title="Releases">Releases</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/reviews/" title="Reviews">Reviews</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/ttr/" title="TTR">TTR</a>
		<a class="widget-taglist__link widget__link btn" href="/fosstrading/tags/xts/" title="xts">xts</a>
	</div>
</div>
</aside>
		</div>
		<footer class="footer">
	<div class="container footer__container flex">
		
		<div class="footer__copyright">
			&copy; 2020 FOSS Trading.
			<span class="footer__copyright-credits">Generated with <a href="https://gohugo.io/" rel="nofollow noopener" target="_blank">Hugo</a> and <a href="https://github.com/Vimux/Mainroad/" rel="nofollow noopener" target="_blank">Mainroad</a> theme.</span>
		</div>
	</div>
</footer>
	</div>
<script async defer src="/fosstrading/js/menu.js"></script>
</body>
</html>